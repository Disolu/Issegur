/*!CK:44009347!*//*1457525316,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["SrIlq"]); }

__d('StickerStoreHeader.react',['cx','fbt','ix','Image.react','InlineBlock.react','React','WorkModeConfig','XUICloseButton.react','XUIText.react','isSocialPlugin'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k=688,l=c('React').createClass({displayName:'StickerStoreHeader',render:function(){var m=c('isSocialPlugin')()&&document.body.offsetWidth<k;return (c('React').createElement('div',{className:"_5r5i"},c('React').createElement('div',{className:"_5r5f"},c('React').createElement(c('Image.react'),{className:"_5r5j"+(m?' '+"hidden_elem":''),src:j('/images/messaging/stickers/store/characters.png')}),c('React').createElement(c('InlineBlock.react'),{alignv:'middle',height:192},c('React').createElement('div',{className:"_5r5l ellipsis"},c('React').createElement(c('Image.react'),{className:"_5r5n",src:j('/images/messaging/stickers/store/basket.png')}),i._("Tienda de stickers")),c('React').createElement(c('XUIText.react'),{className:"_5r5m",size:'large'},this.renderSubheader()))),this.renderCloseButton()));},renderSubheader:function(){if(c('WorkModeConfig').is_work_user){return i._("Busca nuevos stickers para enviar a los compa\u00f1eros de trabajo.");}else return i._("Encuentra stickers nuevos para envi\u00e1rselos a tus amigos.");},renderCloseButton:function(){if(this.props.isPermalink)return null;return (c('React').createElement(c('XUICloseButton.react'),{className:"layerCancel _5r5k",label:i._("Cerrar")}));}});f.exports=l;},null);
__d('StickerStorePurchaseButton.react',['cx','fbt','ImmutableObject','ReactComponentWithPureRenderMixin','React','StickerActions','StickerStateStore','StoreAndPropBasedStateMixin','XUIButton.react'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'StickerStorePurchaseButton',mixins:[c('ReactComponentWithPureRenderMixin'),c('StoreAndPropBasedStateMixin')(c('StickerStateStore'))],statics:{calculateState:function(l){return {isInTray:c('StickerStateStore').isPackInTray(l.stickerPack.id)};}},propTypes:{size:j.string,stickerPack:j.instanceOf(c('ImmutableObject')).isRequired,onPackAdded:j.func},getDefaultProps:function(){return {size:'medium'};},componentWillUpdate:function(l,m){if(this.state.isInTray!==m.isInTray)this.setState({disabled:false});},componentDidUpdate:function(l,m){if(this.state.isInTray&&!m.isInTray&&m.disabled)this.props.onPackAdded&&this.props.onPackAdded();},render:function(){if(this.props.stickerPack.hasOwnProperty('canViewerDownload')&&!this.props.stickerPack.canViewerDownload){var l=i._("Esta oferta ya no est\u00e1 disponible.");return (c('React').createElement(c('XUIButton.react'),{className:"_5r5d",disabled:true,label:l,size:this.props.size}));}return (c('React').createElement(c('XUIButton.react'),{onClick:this._sendRequest,className:"_5r5d",label:this.getLabel(),tooltip:this.getTooltip(),size:this.props.size,use:this.getUse(),disabled:this.state.disabled}));},_sendRequest:function(){this.setState({disabled:true});this.state.isInTray?c('StickerActions').removePack(this.props.stickerPack.id):c('StickerActions').addPack(this.props.stickerPack.id);},getLabel:function(){if(this.state.isInTray){return i._("Eliminar");}else if(this.props.stickerPack.isPurchased){return i._("A\u00f1adir");}else return i._("Gratis");},getTooltip:function(){if(!this.state.isInTray)return null;return i._("Eliminar de tus paquetes de stickers.");},getUse:function(){return this.state.isInTray?'default':'special';}});f.exports=k;},null);
__d('StickerStorePackDetail.react',['cx','Image.react','ImageBlock.react','ImmutableObject','ReactComponentWithPureRenderMixin','React','StickerStorePurchaseButton.react','XUICard.react','XUIGrayText.react','XUIText.react','emptyFunction'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'StickerStorePackDetail',mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{storePackData:i.instanceOf(c('ImmutableObject')).isRequired},getDefaultProps:function(){return {onDataReady:c('emptyFunction')};},componentWillUnmount:function(){this._subscription&&this._subscription.remove();},render:function(){return (c('React').createElement('div',{className:'pvm'},c('React').createElement(c('ImageBlock.react'),{className:"_5ra6",spacing:'none'},c('React').createElement(c('Image.react'),{className:"_5ra5 _5r5s",src:this.props.storePackData.profileImage}),this.renderMetadata()),c('React').createElement(c('XUICard.react'),{className:"pam _5ra7"},c('React').createElement(c('Image.react'),{className:"_5ra8",src:this.props.storePackData.previewImage}),this.renderCopyright())));},renderMetadata:function(){return (c('React').createElement('div',{className:'mtm'},c('React').createElement(c('XUIText.react'),{className:"_5raa",display:'block',weight:'bold'},this.props.storePackData.name),c('React').createElement('div',{className:"_5rac"},this.props.storePackData.artist),c('React').createElement('div',{className:"_5rab"},this.props.storePackData.description),c('React').createElement(c('StickerStorePurchaseButton.react'),{size:'large',stickerPack:this.props.storePackData})));},renderCopyright:function(){return (c('React').createElement('div',null,this.props.storePackData.copyrightLines.map(function(k){return (c('React').createElement(c('XUIGrayText.react'),{key:k,className:"_5ra9",display:'block'},k));})));}});f.exports=j;},null);
__d("XStickerPackLoggingController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/stickers\/logpack\/",{pack_id:{type:"Int"}});},null);
__d("XStickerPackPermalinkController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/stickers\/{pack_id}\/",{pack_id:{type:"Int",required:true},redirect_uri:{type:"String"}});},null);
__d('StickerStorePack.react',['cx','fbt','Arbiter','AsyncSignal','FlexibleBlock.react','Image.react','ImmutableObject','LeftRight.react','Link.react','React','ReactDOM','Scroll','StickerActions','StickerStorePackMessengerUpsell.react','StickerStorePurchaseButton.react','XStickerPackLoggingController','XStickerPackPermalinkController','XUIButton.react','XUICard.react','XUIText.react','getElementPosition'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=i._("Vista previa"),l=c('React').createClass({displayName:'StickerStorePack',propTypes:{stickerPack:j.instanceOf(c('ImmutableObject')).isRequired,isPermalink:j.bool},getInitialState:function(){return {showUpsell:false};},componentDidMount:function(){this._impressionLogged=false;this._unsubscribeID=c('Arbiter').subscribe('stickerStoreScrolled',function(m,n){this.isScrolledIntoView(c('Scroll').getTop(n),n.viewHeight,n.top);}.bind(this));},componentWillUnmount:function(){this._unsubscribeID&&c('Arbiter').unsubscribe(this._unsubscribeID);},isScrolledIntoView:function(m,n,o){var p=c('getElementPosition')(c('ReactDOM').findDOMNode(this)),q=m+p.y-o,r=m+n,s=q+p.height;if(!this._impressionLogged&&s-10<=r&&q+10>=m)this.logImpression();},logImpression:function(){this._impressionLogged=true;var m=c('XStickerPackLoggingController').getURIBuilder().setInt('pack_id',this.props.stickerPack.id).getURI().toString();new (c('AsyncSignal'))(m).send();},render:function(){return (c('React').createElement(c('XUICard.react'),{className:"_5r9y"},c('React').createElement(c('Link.react'),{className:"_5r5d",href:this.getPreviewURI(),onClick:this.onPreviewLinkClicked},this.renderPreviews()),c('React').createElement(c('FlexibleBlock.react'),{className:"_5rah",flex:'left'},this.renderTitleAndArtist(),this.renderActionButtons()),c('React').createElement(c('StickerStorePackMessengerUpsell.react'),{stickerPack:this.props.stickerPack,showUpsell:this.state.showUpsell,onDismiss:function(){return this.setState({showUpsell:false});}.bind(this)})));},renderPreviews:function(){return (c('React').createElement(c('LeftRight.react'),null,c('React').createElement('div',{className:"_5rad"},c('React').createElement(c('Image.react'),{className:"_5r5s",src:this.props.stickerPack.thumbnail||''})),c('React').createElement('div',{className:"_5rae"},this.renderSmallPreviews())));},renderSmallPreviews:function(){return this.props.stickerPack.previews.map(function(m){return (c('React').createElement('div',{key:m,className:"_5raf"},c('React').createElement(c('Image.react'),{className:"_5rag",src:m})));});},renderTitleAndArtist:function(){return (c('React').createElement('div',null,c('React').createElement(c('XUIText.react'),{className:"_5rai ellipsis",display:'block',weight:'bold'},this.props.stickerPack.name),c('React').createElement('div',{className:"_5raj ellipsis"},this.props.stickerPack.artist,'Â ')));},renderActionButtons:function(){return (c('React').createElement('div',{className:"_5rr1"},c('React').createElement(c('XUIButton.react'),{className:"_5r5d",href:this.getPreviewURI(),label:k,onClick:this.onPreviewLinkClicked}),c('React').createElement(c('StickerStorePurchaseButton.react'),{stickerPack:this.props.stickerPack,onPackAdded:function(){return this.setState({showUpsell:true});}.bind(this)})));},getPreviewURI:function(){return !!this.props.isPermalink?'#':c('XStickerPackPermalinkController').getURIBuilder().setInt('pack_id',this.props.stickerPack.id).getURI();},onPreviewLinkClicked:function(){this.props.isPermalink&&c('StickerActions').selectStorePack(this.props.stickerPack.id);},shouldComponentUpdate:function(m,n){return m.stickerPack!==this.props.stickerPack||this.state.showUpsell!==n.showUpsell;}});f.exports=l;},null);
__d('StickerStorePackList.react',['cx','React','StickerState','StickerStorePack.react','XUISpinner.react','emptyFunction'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'StickerStorePackList',propTypes:{isComposer:i.bool,isPermalink:i.bool,onDataReady:i.func,onPackListUpdate:i.func},getDefaultProps:function(){return {isComposer:false,isPermalink:false,onDataReady:c('emptyFunction'),onPackListUpdate:c('emptyFunction')};},getInitialState:function(){return {dataReady:false};},componentDidMount:function(){c('StickerState').onStoreDataReady(function(){this.isMounted()&&this.setState({dataReady:true});this.props.onDataReady();}.bind(this));},render:function(){return (c('React').createElement('div',{className:"clearfix _5r5r"},this.renderPacks()));},renderPacks:function(){if(!this.state.dataReady)return (c('React').createElement('div',{className:"_5r5e"},c('React').createElement(c('XUISpinner.react'),{size:'large'})));var k=this.props.isComposer?c('StickerState').getComposerPacksInStore():c('StickerState').getPacksInStore();return k.map(function(l){return (c('React').createElement(c('StickerStorePack.react'),{key:l.id,stickerPack:l,isPermalink:this.props.isPermalink}));},this);}});f.exports=j;},null);
__d('StickerStorePermalink',['cx','BanzaiLogger','React','ReactDOM','StickerState','StickerStoreHeader.react','StickerStorePackDetail.react','StickerStorePackList.react'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i={mountPackList:function(j){c('ReactDOM').render(c('React').createElement('div',null,c('React').createElement(c('StickerStoreHeader.react'),{isPermalink:true}),c('React').createElement('div',{className:"_5rzk"},c('React').createElement(c('StickerStorePackList.react'),null))),j);c('BanzaiLogger').log('StickersLoggerConfig',{event:'open_store'});},mountPackDetail:function(j,k){c('StickerState').onPackDataReady(k,function(){var l=c('StickerState').getPack(k);c('ReactDOM').render(c('React').createElement('div',{className:"_5rzl"},c('React').createElement(c('StickerStorePackDetail.react'),{packID:k,storePackData:l})),j);});}};f.exports=i;},null);