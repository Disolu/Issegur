/*!CK:3431039603!*//*1457382052,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["9NH46"]); }

__d('ChatTabTypeaheadRenderer',['DOM','MercuryNonEmployeeTypeaheadRenderer','MercuryTypeaheadConstants','MercuryThreadMetadataRawRenderer','TypeaheadFacepile'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(j,k){switch(j.type){case c('MercuryTypeaheadConstants').USER_TYPE:case c('MercuryTypeaheadConstants').PAGE_TYPE:return c('MercuryNonEmployeeTypeaheadRenderer')(j,k);case c('MercuryTypeaheadConstants').THREAD_TYPE:return i(j,k);default:return c('DOM').create('div');}}function i(j,k){var l=[],m=j.mercury_thread;if(m.image_src){l.push(c('DOM').create('img',{alt:'',src:m.image_src}));}else{var n=j.participants_to_render.map(function(q){return q.big_image_src||q.image_src;});if(n){if(n instanceof Array){n=c('TypeaheadFacepile').render(n);}else n=c('DOM').create('img',{alt:'',src:n});l.push(n);}}var o=m.name,p=c('MercuryThreadMetadataRawRenderer').renderRawParticipantList(m.thread_id,j.participants_to_render,m.participants.length,{names_renderer:c('MercuryThreadMetadataRawRenderer').renderShortNames});l.push(c('DOM').create('span',{className:'timestamp'},m.timestamp_relative));l.push(c('DOM').create('span',{className:'text'},o));l.push(c('DOM').create('span',{className:'subtext'},p));return c('DOM').create('li',{className:'node'},l);}h.className='compact';f.exports=h;},null);
__d("XAssociateGroupThreadController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/groups\/messenger\/associate_group_thread\/",{});},null);
__d('MultiChatController',['AsyncSignal','ChatOpenTab','Form','MercuryIDs','MercuryLocalIDs','MercuryThreadIDMap','MercuryViewer','MercuryServerDispatcher','XAssociateGroupThreadController','MercuryThreads','MercuryDispatcher'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('MercuryThreadIDMap').get(),i=c('MercuryThreads').get(),j=c('MercuryDispatcher').get(),k=c('XAssociateGroupThreadController').getURIBuilder().getURI().toString();function l(){}Object.assign(l,{subscribe:function(n,o){n.subscribe('confirm',function(){this.createGroupThreadFromChooserDialog(n,o);}.bind(this));},createGroupThreadFromChooserDialog:function(n,o){var p=c('Form').serialize(n.getRoot()),q=JSON.parse(p.profileChooserItems),r=[];for(var s in q)if(q[s])r.push(s);var t=l.createThreadForFBIDs(r),u=j.subscribe('update-thread-ids',function(v,w){for(var x in w)if(w[x]==t){var y=i.getThreadMetaNow(t),z=h.getServerIDFromClientIDNow(t);if(y&&!y.is_canonical&&z)c('MercuryServerDispatcher').trySend(k,{group_id:o,thread_id:z});new (c('AsyncSignal'))('/ajax/groups/chat/log',{group_id:o,message_id:x}).send();j.unsubscribe(u);break;}});n.hide();},createThreadForTokens:function(n){var o=c('MercuryViewer').getID();if(!n.length)return;n=n.filter(function(q){return q!==o;});var p;if(n.length===0){return;}else if(n.length===1){p=c('MercuryIDs').getThreadIDFromParticipantID(n[0]);c('ChatOpenTab').openThread(p,'ChatTabView');}else{p=c('MercuryLocalIDs').generateThreadID();n.unshift(o);i.createNewLocalThread(p,n);c('ChatOpenTab').openThread(p,'MultiChatController');}return p;},createThreadForFBIDs:function(n){var o=[];for(var p=0;p<n.length;p++)o.push("fbid:"+n[p]);return l.createThreadForTokens(o);}});var m={};m[k]={mode:c('MercuryServerDispatcher').IMMEDIATE};c('MercuryServerDispatcher').registerEndpoints(m);f.exports=l;},null);
__d('ChatAddFriendsTabSheetRawRenderer',['fbt','ChatTabTypeaheadRenderer','ContextualTypeaheadView','DOM','Event','MercuryDataSourceWrapper','MercuryTypeahead','ChatTabTemplates','WorkModeConfig'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i={render:function(j,k,l,m,n,o){var p=o?c('ChatTabTemplates')[':fb:mercury:chat:tab-sheet:add-friends-empty-tab'].build():c('ChatTabTemplates')[':fb:mercury:chat:tab-sheet:add-friends'].build(),q=o?c('MercuryDataSourceWrapper').chat_typeahead_source:c('MercuryDataSourceWrapper').chat_add_people_source;q.setShowThreads(o);var r=new (c('MercuryTypeahead'))(q,c('ContextualTypeaheadView'));r.setViewOption('renderer',c('ChatTabTypeaheadRenderer'));r.setExcludedParticipantsFromThreadMeta(m);if(!o){var s=c('WorkModeConfig').is_work_user?h._("A\u00f1adir compa\u00f1eros de trabajo a este chat"):h._("A\u00f1adir amigos a este chat");r.setPlaceholder(s);}r.build();c('DOM').replace(p.getNode('participantsTypeahead'),r.getElement());c('DOM').setContent(l,p.getRoot());r.getTokenizer().adjustWidth();var t=p.getNode('participantsTypeahead').getAttribute('data-labelid'),u=c('DOM').scry(r.getElement(),'input[type="text"]')[0];if(u)if(t){u.setAttribute('aria-labelledby',t);}else u.setAttribute('aria-label',h._("Para"));r.focus();if(!o){var v=function(){var w=r.getSelectedParticipantIDs();if(w.length)n(w);k.close(j);};c('Event').listen(p.getNode('doneButton'),'click',v);r.subscribe('tokens-return',function(){if(r.getTokens().length)v();});}return r;}};f.exports=i;},null);
__d('ChatAddFriendsTabSheet',['ArbiterMixin','BanzaiLogger','ChatAddFriendsTabSheetRawRenderer','ChatOpenTab','ChatTabActions','MercuryLogMessageType','MercurySourceType','MercuryThreadInfo','MercuryTypeaheadConstants','MercuryMessageObject','MercuryMessageActions','MultiChatController','Style','MercuryThreadActions','MercuryThreads'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('MercuryMessageObject').get(),i=c('MercuryMessageActions').get(),j=c('MercuryThreadActions').get(),k=c('MercuryThreads').get();function l(p,q,r,s){this._threadID=p;this._rootElement=q;this._sheetView=r;this._typeahead=null;this._chatTabView=s;}Object.assign(l.prototype,c('ArbiterMixin'),{render:function(){k.getThreadMeta(this._threadID,function(p){var q=p.is_canonical_user?m:n,r=k.isNewEmptyLocalThread(this._threadID);this._typeahead=c('ChatAddFriendsTabSheetRawRenderer').render(this,this._sheetView,this._rootElement,p,q.bind(null,p),r);this._typeahead.subscribe('tokens-changed',function(){if(r)o(this,this._typeahead,this._threadID,this._chatTabView);}.bind(this));this._typeahead.subscribe('resize',function(){this._sheetView.resize();}.bind(this));this._typeahead.subscribe('esc-pressed',function(){this.inform('esc-pressed');}.bind(this));}.bind(this));},getParticipants:function(){if(!this._typeahead)return null;return this._typeahead.getSelectedParticipantIDs();},isPermanent:function(){return true;},isSheetWithInput:function(){return true;},getType:function(){return 'add_friends_type';},open:function(){this._sheetView.open(this);},close:function(){this._sheetView.close(this);},getHeight:function(){return c('Style').get(this._rootElement,'height');}});function m(p,q){var r=p.participants;c('MultiChatController').createThreadForTokens(r.concat(q));}function n(p,q){var r=p.thread_id;if(c('MercuryThreadInfo').isEmptyLocalThread(p)){j.addParticipants(r,q);}else i.send(h.constructLogMessageObject(c('MercurySourceType').CHAT_WEB,r,c('MercuryLogMessageType').SUBSCRIBE,{added_participants:q}));c('ChatOpenTab').openThread(r,'ChatAddFriendsTabSheet');}function o(p,q,r,s){var t=q.getTypeahead().getData(),u=q.getTokens(),v=q.getTypeahead().getCore();v.getElement().removeAttribute('disabled');t.setShowThreads(u.length===0);var w=u.length==1&&u[0].getInfo().render_type===c('MercuryTypeaheadConstants').THREAD_TYPE;if(w){var x=u[0].getInfo().mercury_thread;if(x){var y=s._sharePreview,z=y&&y.getShareData();if(z)var aa=function(ba){return ba.loadShareFromParams(z.share_type,z.share_params);};c('ChatOpenTab').openThread(x.thread_fbid,'openGroupChat','',aa);}c('BanzaiLogger').log('MercuryQueryResultsLoggerConfig',{event:'chat_tab_group_thread_click'});c('ChatTabActions').closeTab(r,'open_group_chat');}else{if(u.length==1&&u[0].getInfo().render_type===c('MercuryTypeaheadConstants').PAGE_TYPE)v.getElement().setAttribute('disabled','disabled');c('BanzaiLogger').log('MercuryQueryResultsLoggerConfig',{event:'chat_tab_tokens_changed',chat_tab_tokens:u.map(function(ba){return ba.info.uid;})});p.inform('chat/tokens-changed',{token_count:u.length,tokens:u});}}f.exports=l;},null);
__d('ChatEmployeeAwaySheet',['ArbiterMixin','ChatEmployeeAwaySheet.react','mixin','React','ReactDOM'],function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('mixin')(c('ArbiterMixin')));i=h&&h.prototype;function j(k,l,m){'use strict';i.constructor.call(this);this.$ChatEmployeeAwaySheet1=k;this.$ChatEmployeeAwaySheet2=l;this.$ChatEmployeeAwaySheet3=m;}j.prototype.render=function(){'use strict';c('ReactDOM').render(c('React').createElement(c('ChatEmployeeAwaySheet.react'),null),this.$ChatEmployeeAwaySheet2);};j.prototype.isPermanent=function(){'use strict';return true;};j.prototype.getType=function(){'use strict';return 'employee-away';};j.prototype.open=function(){'use strict';this.$ChatEmployeeAwaySheet3.open(this);};j.prototype.close=function(){'use strict';this.$ChatEmployeeAwaySheet3.close(this);};f.exports=j;},null);
__d('ChatNameConversationTabSheetRawRenderer',['fbt','DOM','Event','Input','Keys','ChatTabTemplates'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i={render:function(j,k,l,m,n,o){var p=c('ChatTabTemplates')[':fb:mercury:chat:tab-sheet:name-conversation'].build(),q=p.getNode('nameInput'),r=p.getNode('doneButton'),s=h._("Cerrar"),t=h._("Ocultar"),u=m.name;if(u){c('Input').setValue(q,u);}else c('DOM').setContent(r,t);var v=function(){var w=c('Input').getValue(q);if(w)n(w);o();k.close(j);};c('Event').listen(q,'input',function(){c('DOM').setContent(r,c('Input').getValue(q).length===0?t:s);});c('Event').listen(r,'click',v);c('Event').listen(q,'keyup',function(w){if(w.keyCode===c('Keys').RETURN){v();return false;}});c('DOM').setContent(l,p.getRoot());!j.isAutomatic()&&q.focus();}};f.exports=i;},null);
__d('ChatNameConversationTabSheet',['AsyncRequest','ChatNameConversationTabSheetRawRenderer','MercuryAPIArgsSource','MercuryLogMessageType','MercurySourceType','MercuryMessageObject','MercuryMessageActions','MercuryThreadIDMap','MercuryThreads'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('MercuryMessageObject').get(),i=c('MercuryMessageActions').get(),j=c('MercuryThreadIDMap').get(),k=c('MercuryThreads').get(),l='/ajax/chat/multichat/name_conversation/dismiss.php',m={};function n(o,p,q){'use strict';this.$ChatNameConversationTabSheet1=o;this.$ChatNameConversationTabSheet2=p;this.$ChatNameConversationTabSheet3=q;this.$ChatNameConversationTabSheet4=false;}n.prototype.render=function(){'use strict';k.getThreadMeta(this.$ChatNameConversationTabSheet1,function(o){c('ChatNameConversationTabSheetRawRenderer').render(this,this.$ChatNameConversationTabSheet3,this.$ChatNameConversationTabSheet2,o,this.$ChatNameConversationTabSheet5.bind(null,o),this.$ChatNameConversationTabSheet6.bind(this,o));this.$ChatNameConversationTabSheet3.resize();}.bind(this));};n.prototype.isPermanent=function(){'use strict';return true;};n.prototype.isSheetWithInput=function(){'use strict';return true;};n.prototype.getType=function(){'use strict';return 'name_conversation_type';};n.prototype.open=function(o){'use strict';this.$ChatNameConversationTabSheet4=o;if(!(this.$ChatNameConversationTabSheet4&&this.$ChatNameConversationTabSheet7()))this.$ChatNameConversationTabSheet3.open(this);};n.prototype.close=function(){'use strict';this.$ChatNameConversationTabSheet3.close(this);};n.prototype.isAutomatic=function(){'use strict';return this.$ChatNameConversationTabSheet4;};n.prototype.$ChatNameConversationTabSheet7=function(){'use strict';return !!m[this.$ChatNameConversationTabSheet1];};n.prototype.$ChatNameConversationTabSheet8=function(){'use strict';m[this.$ChatNameConversationTabSheet1]=true;};n.prototype.$ChatNameConversationTabSheet6=function(o){'use strict';if(!o.name_conversation_sheet_dismissed||!this.$ChatNameConversationTabSheet7()){this.$ChatNameConversationTabSheet8();j.getServerIDFromClientID(o.thread_id,function(p){new (c('AsyncRequest'))(l).setData({thread_fbid:p}).send();});}};n.prototype.$ChatNameConversationTabSheet5=function(o,p){'use strict';var q=o.name;if((p||q)&&p!=q)i.send(h.constructLogMessageObject(c('MercurySourceType').CHAT_WEB,o.thread_id,c('MercuryLogMessageType').THREAD_NAME,{name:p}),null,c('MercuryAPIArgsSource').CHAT);};f.exports=n;},null);
__d('ChatNewMessagesTabSheet',['ArbiterMixin','ChatNewMessagesTabSheet.react','React','ReactDOM'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i,j,k){this._threadID=i;this._rootElement=j;this._sheetView=k;}Object.assign(h.prototype,c('ArbiterMixin'),{render:function(){c('ReactDOM').render(c('React').createElement(c('ChatNewMessagesTabSheet.react'),{onClick:this.informClicked.bind(this)}),this._rootElement);},informClicked:function(){this.inform('clicked',this._threadID);},isPermanent:function(){return true;},isSheetWithInput:function(){return true;},getType:function(){return 'new_messages_type';},open:function(){this._sheetView.open(this);},close:function(){this._sheetView.close(this);}});f.exports=h;},null);
__d('ChatNoRecipientsTabSheet',['ChatNoRecipientsTabSheet.react','React','ReactDOM'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i,j,k){this._threadID=i;this._rootElement=j;this._sheetView=k;}Object.assign(h.prototype,{render:function(){c('ReactDOM').render(c('React').createElement(c('ChatNoRecipientsTabSheet.react'),null),this._rootElement);},isPermanent:function(){return true;},getType:function(){return 'no_recipients_type';},open:function(){this._sheetView.open(this);},close:function(){this._sheetView.close(this);}});f.exports=h;},null);
__d('ChatOfflineTabSheet',['cx','fbt','ChatPrivacyActionController','ChatVisibility','CSS','DOM','JSXDOM','Event','JSLogger','MercuryIDs','MercuryParticipants','ChatTabTemplates','WorkModeConfig','emptyFunction'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();function j(k,l,m){this._rootElement=l;this._sheetView=m;this._logger=c('JSLogger').create('blackbird');this._canonicalUser=c('MercuryIDs').getUserIDFromThreadID(k);if(this._canonicalUser)this._privacyActionController=new (c('ChatPrivacyActionController'))(this._canonicalUser,c('emptyFunction'));}Object.assign(j.prototype,{render:function(){if(!this._canonicalUser){this._logger.error('offline_sheet_open_with_non_friend');return;}var k=c('ChatTabTemplates')[':fb:mercury:chat:tab-sheet:message-icon-sheet'].build(),l='fbid:'+this._canonicalUser;c('MercuryParticipants').get(l,function(m){var n='fbChatGoOnlineLink',o=c('JSXDOM').a({href:"#",className:n},i._("act\u00edvalo")),p;if(c('WorkModeConfig').is_work_user){p=i._("Para chatear con {name} y otros compa\u00f1eros de trabajo, {link}.",[i.param('name',m.short_name),i.param('link',o)]);}else p=i._("Para chatear con {name} y otros amigos, {link}.",[i.param('name',m.short_name),i.param('link',o)]);c('DOM').setContent(k.getNode('text'),p);c('CSS').addClass(k.getRoot(),"_1sk1");c('DOM').setContent(this._rootElement,k.getRoot());c('Event').listen(this._rootElement,'click',function(event){if(c('CSS').hasClass(event.getTarget(),n)){if(c('ChatVisibility').isOnline())this._logger.error('tab_sheet_already_online');this._privacyActionController.togglePrivacy();this._logger.log('tab_sheet_go_online',{tab_id:this._canonicalUser});return false;}}.bind(this));this._sheetView.resize();}.bind(this));},isPermanent:function(){return true;},getType:function(){return 'offline_type';},open:function(){this._sheetView.open(this);},close:function(){this._sheetView.close(this);},destroy:function(){this._privacyActionController&&this._privacyActionController.destroy();}});f.exports=j;},null);
__d('ChatReadOnlyTabSheet',['cx','React','ReactDOM','MercuryThreads','MercuryReadOnlyReason'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('MercuryThreads').get();function j(k,l,m){'use strict';this.$ChatReadOnlyTabSheet1=k;this.$ChatReadOnlyTabSheet2=l;this.$ChatReadOnlyTabSheet3=m;}j.prototype.render=function(){'use strict';var k=c('MercuryReadOnlyReason').getReason(i.getThreadMetaNow(this.$ChatReadOnlyTabSheet1));c('ReactDOM').render(c('React').createElement('div',{className:"_87-"},k),this.$ChatReadOnlyTabSheet2);};j.prototype.isPermanent=function(){'use strict';return false;};j.prototype.getType=function(){'use strict';return 'chat-thread-is-read-only';};j.prototype.open=function(){'use strict';this.$ChatReadOnlyTabSheet3.open(this);};j.prototype.close=function(){'use strict';this.$ChatReadOnlyTabSheet3.open(this);};f.exports=j;},null);
__d('ChatThreadIsMutedTabSheet',['ArbiterMixin','ChatThreadIsMutedTabSheet.react','React','ReactDOM'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i,j,k){this._threadID=i;this._rootElement=j;this._sheetView=k;}Object.assign(h.prototype,c('ArbiterMixin'),{render:function(){c('ReactDOM').render(c('React').createElement(c('ChatThreadIsMutedTabSheet.react'),{unmute:this.informClicked.bind(this)}),this._rootElement);},informClicked:function(){this.inform('clicked',this._threadID);},isPermanent:function(){return false;},getType:function(){return 'chat-thread-is-muted';},open:function(){this._sheetView.open(this);},close:function(){this._sheetView.close(this);}});f.exports=h;},null);
__d('ChatUploadWarningTabSheet',['ChatUploadWarningTabSheet.react','React','ReactDOM'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i,j,k){this._threadID=i;this._rootElement=j;this._sheetView=k;}Object.assign(h.prototype,{render:function(){c('ReactDOM').render(c('React').createElement(c('ChatUploadWarningTabSheet.react'),null),this._rootElement);},isPermanent:function(){return false;},getType:function(){return 'upload_warning_type';},open:function(){this._sheetView.open(this);},close:function(){this._sheetView.close(this);}});f.exports=h;},null);
__d('ChatUserBlockedTabSheet',['cx','fbt','CSS','ChatPrivacyActionController','DOM','Event','GenderConst','JSLogger','MercuryIDs','MercuryParticipants','ChatTabTemplates','emptyFunction'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();function j(k,l,m){this._rootElement=l;this._sheetView=m;this._logger=c('JSLogger').create('blackbird');this._canonicalUser=c('MercuryIDs').getUserIDFromThreadID(k);if(this._canonicalUser)this._privacyActionController=new (c('ChatPrivacyActionController'))(this._canonicalUser,c('emptyFunction'));}Object.assign(j.prototype,{render:function(){if(!this._canonicalUser){this._logger.error('user_blocked_sheet_open_with_non_friend');return;}var k=c('ChatTabTemplates')[':fb:mercury:chat:tab-sheet:user-blocked'].build(),l='fbid:'+this._canonicalUser;c('MercuryParticipants').get(l,function(m){var n=null;switch(m.gender){case c('GenderConst').FEMALE_SINGULAR:case c('GenderConst').FEMALE_SINGULAR_GUESS:n=i._("Desactivaste el chat para {name} pero igual puedes enviarle un mensaje.",[i.param('name',m.short_name)]);break;case c('GenderConst').MALE_SINGULAR:case c('GenderConst').MALE_SINGULAR_GUESS:n=i._("Desactivaste el chat para {name} pero igual puedes enviarle un mensaje.",[i.param('name',m.short_name)]);break;default:n=i._("Desactivaste el chat para {name} pero igual puedes enviarle un mensaje.",[i.param('name',m.short_name)]);}c('DOM').setContent(k.getNode('text'),n+' ');var o=i._("\u00bfQuieres activar el chat para {name}?",[i.param('name',m.short_name)]);c('DOM').setContent(k.getNode('actionLink'),o);c('CSS').addClass(k.getRoot(),"_1sk0");c('DOM').setContent(this._rootElement,k.getRoot());c('Event').listen(k.getNode('actionLink'),'click',this._privacyActionController.togglePrivacy.bind(this._privacyActionController));this._sheetView.resize();}.bind(this));},isPermanent:function(){return true;},getType:function(){return 'user_blocked_type';},open:function(){this._sheetView.open(this);},close:function(){this._sheetView.close(this);},destroy:function(){this._privacyActionController&&this._privacyActionController.destroy();}});f.exports=j;},null);